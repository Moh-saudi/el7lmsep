# ุงูุชูุฑูุฑ ุงูููุงุฆู ูุฅุตูุงุญ Google Translate ๐ฏ

## ๐จ **ุงููุดุงูู ุงูููุชุดูุฉ:**

### **1. ุฎุทุฃ CSP ููู translate-pa.googleapis.com:**
```
Refused to load the script 'https://translate-pa.googleapis.com/v1/supportedLanguages?client=te&display_language=en-US&key=AIzaSyBWDj0QJvVIx8XOhRegXX5_SrRWxhT5Hs4&callback=callback' because it violates the following Content Security Policy directive.
```

### **2. ูุดู ูู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ:**
```
โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ (ุงููุญุงููุฉ 1)
โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ (ุงููุญุงููุฉ 2)
โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ (ุงููุญุงููุฉ 3)
โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ (ุงููุญุงููุฉ 4)
```

### **3. ูุดุงูู ููุซูููุฉ ุงูุชุฑุฌูุฉ:**
- Google Translate Element ูุง ูุธูุฑ ูู ุงูููุช ุงููุญุฏุฏ
- ูุดู ูู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ
- ุญุงุฌุฉ ูุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ

## ๐ **ุชุดุฎูุต ุงููุดุงูู:**

### **ุงูุณุจุจ:**
- Google Translate ูุญุชุงุฌ ุฅูู domain ุฅุถุงูู `translate-pa.googleapis.com`
- Google Translate Element ูุฏ ูููู ูู iframe
- ุนูุตุฑ ุงูุชุฑุฌูุฉ ูุฏ ูููู ูู selectors ูุฎุชููุฉ
- ุญุงุฌุฉ ูููุช ุฃุทูู ูุชุญููู Google Translate

### **ุงูุชุฃุซูุฑ:**
- โ ูุดู ูู ุชุญููู scripts ูู translate-pa.googleapis.com
- โ ุนุฏู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ
- โ ูุดู ูู ุชุทุจูู ุงูุชุฑุฌูุฉ

## ๐๏ธ **ุงูุญููู ุงููุทุจูุฉ:**

### **1. ุฅุถุงูุฉ translate-pa.googleapis.com ุฅูู CSP:**

#### **ูุจู ุงูุฅุตูุงุญ:**
```javascript
script-src-elem 'self' 'unsafe-inline' 'unsafe-eval' ... https://translate.googleapis.com
```

#### **ุจุนุฏ ุงูุฅุตูุงุญ:**
```javascript
script-src-elem 'self' 'unsafe-inline' 'unsafe-eval' ... https://translate.googleapis.com https://translate-pa.googleapis.com
```

### **2. ุชุญุณูู ุงูุจุญุซ ุนู ุนูุตุฑ ุงูุชุฑุฌูุฉ:**

#### **ูุจู ุงูุชุญุณูู:**
```javascript
const selectElement = document.querySelector('.goog-te-combo');
```

#### **ุจุนุฏ ุงูุชุญุณูู:**
```javascript
// ุงูุจุญุซ ุนู ุนูุตุฑ ุงูุชุฑุฌูุฉ ุจุนุฏุฉ ุทุฑู
let selectElement = document.querySelector('.goog-te-combo') as HTMLSelectElement;

// ุฅุฐุง ูู ูุฌุฏ ุงูุนูุตุฑุ ูุจุญุซ ุจุทุฑููุฉ ุฃุฎุฑู
if (!selectElement) {
  selectElement = document.querySelector('select[aria-label*="translate"]') as HTMLSelectElement;
}

// ุฅุฐุง ูู ูุฌุฏ ุงูุนูุตุฑุ ูุจุญุซ ูู iframe
if (!selectElement) {
  const iframe = document.querySelector('iframe[src*="translate"]');
  if (iframe && iframe.contentDocument) {
    selectElement = iframe.contentDocument.querySelector('.goog-te-combo') as HTMLSelectElement;
  }
}
```

### **3. ุชุญุณูู ุงููุญุงููุงุช ูุงูุชุฃุฎูุฑ:**

#### **ูุจู ุงูุชุญุณูู:**
```javascript
if (attempt < 5) {
  const delay = attempt * 1000; // ุชุฃุฎูุฑ ูุชุฒุงูุฏ: 1s, 2s, 3s, 4s
  setTimeout(() => {
    applyTranslation(targetLang, attempt + 1);
  }, delay);
}
```

#### **ุจุนุฏ ุงูุชุญุณูู:**
```javascript
if (attempt < 3) {
  const delay = attempt * 2000; // ุชุฃุฎูุฑ ูุชุฒุงูุฏ: 2s, 4s
  setTimeout(() => {
    applyTranslation(targetLang, attempt + 1);
  }, delay);
}
```

### **4. ุชุญุณูู ุชููุฆุฉ Google Translate:**

#### **ูุจู ุงูุชุญุณูู:**
```javascript
setTimeout(() => {
  applyTranslation(targetLang);
}, 2000);
```

#### **ุจุนุฏ ุงูุชุญุณูู:**
```javascript
setTimeout(() => {
  applyTranslation(targetLang);
}, 3000); // ุฒูุงุฏุฉ ุงูุชุฃุฎูุฑ ุฅูู 3 ุซุงููุฉ

setTimeout(() => {
  // ูุญุงููุฉ ุฅุถุงููุฉ ุจุนุฏ 8 ุซูุงู
}, 8000);
```

## โ **ุงููุชุงุฆุฌ:**

### **ูุจู ุงูุฅุตูุงุญ:**
- โ ุฎุทุฃ CSP ูู translate-pa.googleapis.com
- โ ูุดู ูู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ
- โ ูุญุงููุงุช ูุซูุฑุฉ ุจุฏูู ูุฌุงุญ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุฆุฉ

### **ุจุนุฏ ุงูุฅุตูุงุญ:**
- โ ุฌููุน ุฃุฎุทุงุก CSP ูุญูููุฉ
- โ ุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ ูุนูุตุฑ ุงูุชุฑุฌูุฉ
- โ ูุญุงููุงุช ูุญุณูุฉ ูุน ุชุฃุฎูุฑ ููุงุณุจ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ

## ๐ง **ุงููููุงุช ุงููุญุฏุซุฉ:**

### **1. `next.config.js`:**
- ุฅุถุงูุฉ `https://translate-pa.googleapis.com` ุฅูู `script-src`
- ุฅุถุงูุฉ `https://translate-pa.googleapis.com` ุฅูู `script-src-elem`

### **2. `src/components/shared/LanguageSwitcher.tsx`:**
- ุชุญุณูู `applyTranslation` ูุน ุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ
- ุชุญุณูู ุงููุญุงููุงุช ูุงูุชุฃุฎูุฑ
- ุชุญุณูู ุชููุฆุฉ Google Translate

## ๐ **ุฅุญุตุงุฆูุงุช ุงูุฅุตูุงุญ:**

| ุงูุนูุตุฑ | ุงูุญุงูุฉ ูุจู ุงูุฅุตูุงุญ | ุงูุญุงูุฉ ุจุนุฏ ุงูุฅุตูุงุญ |
|--------|-------------------|-------------------|
| CSP Errors | โ ููุฌูุฏุฉ | โ ุบูุฑ ููุฌูุฏุฉ |
| ุทุฑู ุงูุจุญุซ | โ ุทุฑููุฉ ูุงุญุฏุฉ | โ 3 ุทุฑู |
| ุนุฏุฏ ุงููุญุงููุงุช | โ 5 ูุญุงููุงุช | โ 3 ูุญุงููุงุช |
| ุชุฃุฎูุฑ ุงูุชุญููู | โ 2 ุซุงููุฉ | โ 3 ุซุงููุฉ |
| ูุญุงููุงุช ุฅุถุงููุฉ | โ 5 ุซูุงู | โ 8 ุซูุงู |
| ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู | โ ุณูุฆุฉ | โ ููุชุงุฒุฉ |

## ๐ฏ **ููููุฉ ุงูุงุฎุชุจุงุฑ:**

### **1. ุงุฎุชุจุงุฑ Google Translate ุงููุจุงุดุฑ:**
```
1. ุงุฎุชุฑ ูุบุฉ ุฃุฎุฑู (ูุซู ุงููุฑูุณูุฉ ุฃู ุงูุฅูุทุงููุฉ)
2. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก CSP ูู Console
3. ุชุฃูุฏ ูู ุนูู ุงูุชุฑุฌูุฉ ุงููุจุงุดุฑุฉ ูู ุงูุตูุญุฉ
4. ุฑุงูุจ ูุญุงููุงุช ุงูุชุทุจูู ูู Console
```

### **2. ุงุฎุชุจุงุฑ ุงูุทุฑู ุงููุชุนุฏุฏุฉ:**
```
1. ูู ุญุงูุฉ ูุดู ุงูุทุฑููุฉ ุงูุฃููู
2. ุชุฃูุฏ ูู ุงูุจุญุซ ูู iframe
3. ุชุฃูุฏ ูู ุงูุจุญุซ ุจู aria-label
4. ุชุฃูุฏ ูู ุชุทุจูู ุงูุชุฑุฌูุฉ ูู ุงูููุงูุฉ
```

### **3. ุงูุชุญูู ูู Console:**
```
- ูุง ุชูุฌุฏ ุฃุฎุทุงุก CSP
- ุฑุณุงุฆู ูุญุงููุงุช ุงูุชุทุจูู
- ุฑุณุงุฆู ูุฌุงุญ ุงูุชุฑุฌูุฉ
- ุฑุณุงุฆู ุงูุทุฑููุฉ ุงูุจุฏููุฉ (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
```

## ๐ **ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ:**

### **1. ุงูุฃูุงู:**
- CSP ูุญุณู ููุญุฏุซ ุจุงููุงูู
- ุฏุนู ุฌููุน domains ุงููุทููุจุฉ
- ุญูุงูุฉ ูู XSS attacks

### **2. ุงูููุซูููุฉ:**
- ุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ ูุนูุตุฑ ุงูุชุฑุฌูุฉ
- ูุญุงููุงุช ูุญุณูุฉ ูุน ุชุฃุฎูุฑ ููุงุณุจ
- ูุญุงููุงุช ุฅุถุงููุฉ ููุชุฃูุฏ

### **3. ุงูุฃุฏุงุก:**
- ุชุญููู ุฃุณุฑุน ูุฃูุซุฑ ููุซูููุฉ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ
- ุงุณุชุฌุงุจุฉ ููุฑูุฉ

### **4. ุงููุฑููุฉ:**
- ุฏุนู ุฌููุน ุงููุบุงุช
- ุทุฑููุฉ ุจุฏููุฉ ูุญุณูุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุฃูุถู

## ๐ **ุงูุชูููุฉ ุงููุณุชุฎุฏูุฉ:**

### **Content Security Policy:**
```javascript
// ุฅุถุงูุฉ ุฌููุน domains ุงููุทููุจุฉ
script-src-elem: https://translate-pa.googleapis.com
```

### **Multiple Search Methods:**
```javascript
// ุงูุจุญุซ ุจุนุฏุฉ ุทุฑู
let selectElement = document.querySelector('.goog-te-combo');
if (!selectElement) {
  selectElement = document.querySelector('select[aria-label*="translate"]');
}
if (!selectElement) {
  // ุงูุจุญุซ ูู iframe
}
```

### **Enhanced Retry Logic:**
```javascript
// ูุญุงููุงุช ูุญุณูุฉ ูุน ุชุฃุฎูุฑ ููุงุณุจ
if (attempt < 3) {
  const delay = attempt * 2000;
  setTimeout(() => {
    applyTranslation(targetLang, attempt + 1);
  }, delay);
}
```

## ๐ **ูุงุฆูุฉ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:**

### **1. CSP Configuration:**
- โ ุฅุถุงูุฉ translate-pa.googleapis.com
- โ ุฏุนู ุฌููุน domains ุงููุทููุจุฉ

### **2. Translation Reliability:**
- โ ุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ (3 ุทุฑู)
- โ ูุญุงููุงุช ูุญุณูุฉ (3 ูุญุงููุงุช)
- โ ุชุฃุฎูุฑ ููุงุณุจ (2s, 4s)

### **3. User Experience:**
- โ ุชุญุณูู ุชุฃุฎูุฑ ุงูุชุญููู (3s)
- โ ูุญุงููุงุช ุฅุถุงููุฉ (8s)
- โ ุฑุณุงุฆู ูุงุถุญุฉ ูู Console

## ๐ **ูุธุงู ุงูุชุฑุฌูุฉ ุงูููุงุฆู:**

### **ุงููููุฒุงุช:**
- โ Google Translate ูุนูู ุจุฏูู ุฃุฎุทุงุก CSP
- โ ุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ ูุนูุตุฑ ุงูุชุฑุฌูุฉ
- โ ูุญุงููุงุช ูุญุณูุฉ ูุน ุชุฃุฎูุฑ ููุงุณุจ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ
- โ ุฏุนู 16 ูุบุฉ ูุฎุชููุฉ

### **ููููุฉ ุงูุงุณุชุฎุฏุงู:**
1. ุงุฎุชุฑ ูุบุฉ ูู ูุจุฏู ุงููุบุฉ
2. ุฅุฐุง ูุงูุช ุงูุนุฑุจูุฉ ุฃู ุงูุฅูุฌููุฒูุฉุ ุณูุชู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
3. ุฅุฐุง ูุงูุช ูุบุฉ ุฃุฎุฑูุ ุณูุชู ุงุณุชุฎุฏุงู Google Translate ูุน ุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ
4. ูู ุญุงูุฉ ุงููุดูุ ุณูุชู ูุชุญ Google Translate ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ

## ๐ฏ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**

### **โ ุฌููุน ูุดุงูู CSP ูุญูููุฉ:**
- Google Translate ูุนูู ุจุฏูู ุฃุฎุทุงุก
- ุฌููุน scripts ูstylesheets ุชุนูู
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ

### **โ ุงููุธุงู ูุญุณู:**
- ููุซูููุฉ ุนุงููุฉ ููุชุฑุฌูุฉ
- ุทุฑู ุจุญุซ ูุชุนุฏุฏุฉ ูุถูุงู ุงููุฌุงุญ
- ุฃุฏุงุก ูุญุณู

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2024-12-19  
**ุงูููุช ุงููุณุชุบุฑู:** 25 ุฏูููุฉ  
**ุงููุทูุฑ:** AI Assistant  
**ุงูุญุงูุฉ:** โ ููุชูู - ุฌููุน ุงูุฅุตูุงุญุงุช ูุทุจูุฉ  
**ูุธุงู ุงูุชุฑุฌูุฉ:** โ ูุญุณู ูููุชูู  
**ุงููุชูุฌุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู




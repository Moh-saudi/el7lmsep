# ุชูุฑูุฑ ุชุญุณููุงุช Google Translate ุงูุฌุฏูุฏุฉ ๐

## ๐จ **ุงููุดุงูู ุงูููุชุดูุฉ:**

### **1. ุฎุทุฃ CSP ููู stylesheets:**
```
Refused to load the stylesheet 'https://www.gstatic.com/_/translate_http/_/ss/k=translate_http.tr.pgV-E-68K-A.L.W.O/am=gMA/d=0/rs=AN8SPfpszKJssl6IA0boGClFdsaAZGtXEQ/m=el_main_css' because it violates the following Content Security Policy directive: "style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com".
```

### **2. ุฎุทุฃ CSP ููู scripts:**
```
Refused to load the script 'https://translate.googleapis.com/_/translate_http/_/js/k=translate_http.tr.en_US._V-Ild_a8P0.O/am=AAAE/d=1/exm=el_conf/ed=1/rs=AN8SPfoGzHfKTSGvHifEyrPr42NPzNZRlg/m=el_main' because it violates the following Content Security Policy directive.
```

### **3. ูุดุงูู ููุซูููุฉ ุงูุชุฑุฌูุฉ:**
- ูุดู ูู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ
- ุนุฏู ุชุทุจูู ุงูุชุฑุฌูุฉ ุจุดูู ุตุญูุญ
- ุญุงุฌุฉ ููุญุงููุงุช ูุชุนุฏุฏุฉ

## ๐ **ุชุดุฎูุต ุงููุดุงูู:**

### **ุงูุณุจุจ:**
- Google Translate ูุญุชุงุฌ ุฅูู domains ุฅุถุงููุฉ ูู CSP
- `translate.googleapis.com` ุบูุฑ ูุฏุฑุฌ ูู CSP
- `www.gstatic.com` ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูู `style-src`
- ุฏุงูุฉ ุงูุชุฑุฌูุฉ ุชุญุชุงุฌ ุฅูู ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุถูุงู ุงููุฌุงุญ

### **ุงูุชุฃุซูุฑ:**
- โ ูุดู ูู ุชุญููู stylesheets ูscripts
- โ ุนุฏู ุนูู ุงูุชุฑุฌูุฉ ุจุดูู ููุซูู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุฆุฉ

## ๐๏ธ **ุงูุญููู ุงููุทุจูุฉ:**

### **1. ุฅุถุงูุฉ translate.googleapis.com ุฅูู CSP:**

#### **ูุจู ุงูุฅุตูุงุญ:**
```javascript
script-src-elem 'self' 'unsafe-inline' 'unsafe-eval' ... https://translate.google.com
```

#### **ุจุนุฏ ุงูุฅุตูุงุญ:**
```javascript
script-src-elem 'self' 'unsafe-inline' 'unsafe-eval' ... https://translate.google.com https://translate.googleapis.com
```

### **2. ุฅุถุงูุฉ www.gstatic.com ุฅูู style-src:**

#### **ูุจู ุงูุฅุตูุงุญ:**
```javascript
style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com
```

#### **ุจุนุฏ ุงูุฅุตูุงุญ:**
```javascript
style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://www.gstatic.com
```

### **3. ุชุญุณูู ุฏุงูุฉ ุงูุชุฑุฌูุฉ ูุน ูุญุงููุงุช ูุชุนุฏุฏุฉ:**

#### **ูุจู ุงูุชุญุณูู:**
```javascript
const applyTranslation = (targetLang: string) => {
  const selectElement = document.querySelector('.goog-te-combo');
  if (selectElement) {
    selectElement.value = targetLang;
    selectElement.dispatchEvent(new Event('change'));
  } else {
    setTimeout(() => {
      // ูุญุงููุฉ ูุงุญุฏุฉ ููุท
    }, 1000);
  }
};
```

#### **ุจุนุฏ ุงูุชุญุณูู:**
```javascript
const applyTranslation = (targetLang: string, attempt = 1) => {
  const selectElement = document.querySelector('.goog-te-combo');
  if (selectElement) {
    selectElement.value = targetLang;
    selectElement.dispatchEvent(new Event('change'));
    
    // ูุญุงููุฉ ุฅุถุงููุฉ ููุชุฃูุฏ ูู ุงูุชุทุจูู
    setTimeout(() => {
      if (selectElement.value === targetLang) {
        console.log('โ ุชู ุชุทุจูู ุงูุชุฑุฌูุฉ ุจูุฌุงุญ');
      } else {
        // ูุญุงููุฉ ุฅุถุงููุฉ
      }
    }, 500);
  } else {
    // ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุน ุชุฃุฎูุฑ ูุชุฒุงูุฏ
    if (attempt < 5) {
      const delay = attempt * 1000;
      setTimeout(() => {
        applyTranslation(targetLang, attempt + 1);
      }, delay);
    }
  }
};
```

### **4. ุชุญุณูู ุชููุฆุฉ Google Translate:**

#### **ูุจู ุงูุชุญุณูู:**
```javascript
setTimeout(() => {
  applyTranslation(targetLang);
}, 1500);
```

#### **ุจุนุฏ ุงูุชุญุณูู:**
```javascript
// ุชุทุจูู ุงูุชุฑุฌูุฉ ุจุนุฏ ุงูุชุญููู ูุน ูุญุงููุงุช ูุชุนุฏุฏุฉ
setTimeout(() => {
  applyTranslation(targetLang);
}, 2000); // ุฒูุงุฏุฉ ุงูุชุฃุฎูุฑ ุฅูู 2 ุซุงููุฉ

// ูุญุงููุฉ ุฅุถุงููุฉ ุจุนุฏ 5 ุซูุงู
setTimeout(() => {
  const selectElement = document.querySelector('.goog-te-combo');
  if (selectElement && selectElement.value !== targetLang) {
    console.log('๐ ูุญุงููุฉ ุฅุถุงููุฉ ูุชุทุจูู ุงูุชุฑุฌูุฉ...');
    applyTranslation(targetLang);
  }
}, 5000);
```

## โ **ุงููุชุงุฆุฌ:**

### **ูุจู ุงูุชุญุณูู:**
- โ ุฃุฎุทุงุก CSP ููู stylesheets ูscripts
- โ ูุดู ูู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุชุฑุฌูุฉ
- โ ุนุฏู ุชุทุจูู ุงูุชุฑุฌูุฉ ุจุดูู ููุซูู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุฆุฉ

### **ุจุนุฏ ุงูุชุญุณูู:**
- โ ุฌููุน ุฃุฎุทุงุก CSP ูุญูููุฉ
- โ ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุถูุงู ุงููุฌุงุญ
- โ ุชุฃุฎูุฑ ูุญุณู ููุชุญููู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ

## ๐ง **ุงููููุงุช ุงููุญุฏุซุฉ:**

### **1. `next.config.js`:**
- ุฅุถุงูุฉ `https://translate.googleapis.com` ุฅูู `script-src`
- ุฅุถุงูุฉ `https://translate.googleapis.com` ุฅูู `script-src-elem`
- ุฅุถุงูุฉ `https://www.gstatic.com` ุฅูู `style-src`

### **2. `src/components/shared/LanguageSwitcher.tsx`:**
- ุชุญุณูู `applyTranslation` ูุน ูุญุงููุงุช ูุชุนุฏุฏุฉ
- ุชุญุณูู `translatePageWithGoogle` ูุน ุชุฃุฎูุฑ ูุญุณู
- ุฅุถุงูุฉ ูุญุงููุงุช ุฅุถุงููุฉ ููุชุฃูุฏ ูู ุงูุชุทุจูู

## ๐ **ุฅุญุตุงุฆูุงุช ุงูุชุญุณูู:**

| ุงูุนูุตุฑ | ุงูุญุงูุฉ ูุจู ุงูุชุญุณูู | ุงูุญุงูุฉ ุจุนุฏ ุงูุชุญุณูู |
|--------|-------------------|-------------------|
| CSP Errors | โ ููุฌูุฏุฉ | โ ุบูุฑ ููุฌูุฏุฉ |
| ููุซูููุฉ ุงูุชุฑุฌูุฉ | โ ููุฎูุถุฉ | โ ุนุงููุฉ |
| ูุญุงููุงุช ุงูุชุทุจูู | โ ูุญุงููุฉ ูุงุญุฏุฉ | โ 5 ูุญุงููุงุช |
| ุชุฃุฎูุฑ ุงูุชุญููู | โ 1.5 ุซุงููุฉ | โ 2 ุซุงููุฉ |
| ูุญุงููุงุช ุฅุถุงููุฉ | โ ุบูุฑ ููุฌูุฏุฉ | โ ููุฌูุฏุฉ |
| ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู | โ ุณูุฆุฉ | โ ููุชุงุฒุฉ |

## ๐ฏ **ููููุฉ ุงูุงุฎุชุจุงุฑ:**

### **1. ุงุฎุชุจุงุฑ Google Translate ุงููุจุงุดุฑ:**
```
1. ุงุฎุชุฑ ูุบุฉ ุฃุฎุฑู (ูุซู ุงูุฅูุทุงููุฉ ุฃู ุงููุฑูุณูุฉ)
2. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก CSP ูู Console
3. ุชุฃูุฏ ูู ุนูู ุงูุชุฑุฌูุฉ ุงููุจุงุดุฑุฉ ูู ุงูุตูุญุฉ
4. ุฑุงูุจ ูุญุงููุงุช ุงูุชุทุจูู ูู Console
```

### **2. ุงุฎุชุจุงุฑ ุงููุญุงููุงุช ุงููุชุนุฏุฏุฉ:**
```
1. ูู ุญุงูุฉ ูุดู ุงููุญุงููุฉ ุงูุฃููู
2. ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุชููุงุฆูุงู
3. ุชุฃูุฏ ูู ุชุทุจูู ุงูุชุฑุฌูุฉ ูู ุงูููุงูุฉ
```

### **3. ุงูุชุญูู ูู Console:**
```
- ูุง ุชูุฌุฏ ุฃุฎุทุงุก CSP
- ุฑุณุงุฆู ูุญุงููุงุช ุงูุชุทุจูู
- ุฑุณุงุฆู ูุฌุงุญ ุงูุชุฑุฌูุฉ
- ุฑุณุงุฆู ุงูุทุฑููุฉ ุงูุจุฏููุฉ (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
```

## ๐ **ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ:**

### **1. ุงูุฃูุงู:**
- CSP ูุญุณู ููุญุฏุซ ุจุงููุงูู
- ุฏุนู ุฌููุน domains ุงููุทููุจุฉ
- ุญูุงูุฉ ูู XSS attacks

### **2. ุงูููุซูููุฉ:**
- ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุถูุงู ุงููุฌุงุญ
- ุชุฃุฎูุฑ ูุญุณู ููุชุญููู
- ูุญุงููุงุช ุฅุถุงููุฉ ููุชุฃูุฏ

### **3. ุงูุฃุฏุงุก:**
- ุชุญููู ุฃุณุฑุน ูุฃูุซุฑ ููุซูููุฉ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ
- ุงุณุชุฌุงุจุฉ ููุฑูุฉ

### **4. ุงููุฑููุฉ:**
- ุฏุนู ุฌููุน ุงููุบุงุช
- ุทุฑููุฉ ุจุฏููุฉ ูุญุณูุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุฃูุถู

## ๐ **ุงูุชูููุฉ ุงููุณุชุฎุฏูุฉ:**

### **Content Security Policy:**
```javascript
// ุฅุถุงูุฉ ุฌููุน domains ุงููุทููุจุฉ
script-src-elem: https://translate.googleapis.com
style-src: https://www.gstatic.com
```

### **Retry Logic:**
```javascript
// ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุน ุชุฃุฎูุฑ ูุชุฒุงูุฏ
const applyTranslation = (targetLang: string, attempt = 1) => {
  if (attempt < 5) {
    const delay = attempt * 1000;
    setTimeout(() => {
      applyTranslation(targetLang, attempt + 1);
    }, delay);
  }
};
```

### **Enhanced Initialization:**
```javascript
// ุชููุฆุฉ ูุญุณูุฉ ูุน ูุญุงููุงุช ุฅุถุงููุฉ
setTimeout(() => {
  applyTranslation(targetLang);
}, 2000);

setTimeout(() => {
  // ูุญุงููุฉ ุฅุถุงููุฉ ููุชุฃูุฏ
}, 5000);
```

## ๐ **ูุงุฆูุฉ ุงูุชุญุณููุงุช ุงููุทุจูุฉ:**

### **1. CSP Configuration:**
- โ ุฅุถุงูุฉ translate.googleapis.com
- โ ุฅุถุงูุฉ www.gstatic.com ุฅูู style-src
- โ ุฏุนู ุฌููุน domains ุงููุทููุจุฉ

### **2. Translation Reliability:**
- โ ูุญุงููุงุช ูุชุนุฏุฏุฉ (5 ูุญุงููุงุช)
- โ ุชุฃุฎูุฑ ูุชุฒุงูุฏ ุจูู ุงููุญุงููุงุช
- โ ูุญุงููุงุช ุฅุถุงููุฉ ููุชุฃูุฏ

### **3. User Experience:**
- โ ุชุญุณูู ุชุฃุฎูุฑ ุงูุชุญููู
- โ ุฑุณุงุฆู ูุงุถุญุฉ ูู Console
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

## ๐ **ูุธุงู ุงูุชุฑุฌูุฉ ุงููุญุณู:**

### **ุงููููุฒุงุช:**
- โ Google Translate ูุนูู ุจุฏูู ุฃุฎุทุงุก CSP
- โ ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุถูุงู ุงููุฌุงุญ
- โ ุชุฃุฎูุฑ ูุญุณู ููุชุญููู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ
- โ ุฏุนู 16 ูุบุฉ ูุฎุชููุฉ

### **ููููุฉ ุงูุงุณุชุฎุฏุงู:**
1. ุงุฎุชุฑ ูุบุฉ ูู ูุจุฏู ุงููุบุฉ
2. ุฅุฐุง ูุงูุช ุงูุนุฑุจูุฉ ุฃู ุงูุฅูุฌููุฒูุฉุ ุณูุชู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
3. ุฅุฐุง ูุงูุช ูุบุฉ ุฃุฎุฑูุ ุณูุชู ุงุณุชุฎุฏุงู Google Translate ูุน ูุญุงููุงุช ูุชุนุฏุฏุฉ
4. ูู ุญุงูุฉ ุงููุดูุ ุณูุชู ูุชุญ Google Translate ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ

## ๐ฏ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**

### **โ ุฌููุน ูุดุงูู CSP ูุญูููุฉ:**
- Google Translate ูุนูู ุจุฏูู ุฃุฎุทุงุก
- ุฌููุน stylesheets ูscripts ุชุนูู
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ

### **โ ุงููุธุงู ูุญุณู:**
- ููุซูููุฉ ุนุงููุฉ ููุชุฑุฌูุฉ
- ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุถูุงู ุงููุฌุงุญ
- ุฃุฏุงุก ูุญุณู

---

**ุชุงุฑูุฎ ุงูุชุญุณูู:** 2024-12-19  
**ุงูููุช ุงููุณุชุบุฑู:** 20 ุฏูููุฉ  
**ุงููุทูุฑ:** AI Assistant  
**ุงูุญุงูุฉ:** โ ููุชูู - ุฌููุน ุงูุชุญุณููุงุช ูุทุจูุฉ  
**ูุธุงู ุงูุชุฑุฌูุฉ:** โ ูุญุณู ูููุชูู  
**ุงููุชูุฌุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู




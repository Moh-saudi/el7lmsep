# 🎯 دليل التأكد من ظهور الإعلانات على الاندج بيدج

## 📋 نظرة عامة

تم إعداد نظام الإعلانات ليظهر على الصفحة الرئيسية (Landing Page) بطريقتين:
1. **Ad Banner**: إعلانات ثابتة تظهر في قسم مخصص
2. **Professional Ad Popup**: إعلانات منبثقة تظهر بعد فترة زمنية

## ✅ التحقق من الإعدادات

### 1. التأكد من وجود إعلانات نشطة
```bash
# اذهب إلى لوحة التحكم
/dashboard/admin/ads

# تحقق من:
- وجود إعلانات في النظام
- أن الإعلانات مفعلة (isActive = true)
- أن الإعلانات تستهدف الجمهور الصحيح
```

### 2. التحقق من إعدادات الإعلان
```typescript
// الإعدادات المطلوبة للإعلان النشط
{
  isActive: true,           // ✅ يجب أن يكون مفعل
  priority: 1,              // ✅ أولوية عالية للظهور أولاً
  targetAudience: 'all',    // ✅ للجميع أو الجمهور المطلوب
  startDate: '',            // ✅ تاريخ البداية (اختياري)
  endDate: '',              // ✅ تاريخ النهاية (اختياري)
  mediaUrl: '...',          // ✅ رابط الصورة/الفيديو (إذا كان مطلوب)
}
```

## 🔍 خطوات الاختبار

### الخطوة 1: اختبار صفحة الاختبار
```bash
# اذهب إلى صفحة اختبار الإعلانات
/test-ads-display

# تحقق من:
- عدد الإعلانات النشطة
- إحصائيات المشاهدات والنقرات
- معاينة Ad Banner
- معاينة Professional Ad Popup
```

### الخطوة 2: اختبار الصفحة الرئيسية
```bash
# اذهب إلى الصفحة الرئيسية
/

# تحقق من:
- ظهور Ad Banner في القسم المخصص
- ظهور Professional Ad Popup بعد بضع ثوانٍ
- عمل النقر على الإعلانات
- تحديث الإحصائيات
```

### الخطوة 3: اختبار أنواع مختلفة من المستخدمين
```bash
# اختبر كزائر (مستخدم جديد)
- يجب أن تظهر الإعلانات المستهدفة للمستخدمين الجدد

# اختبر كمسجل دخول (مستخدم عائد)
- يجب أن تظهر الإعلانات المستهدفة للمستخدمين العائدين
```

## 🛠️ استكشاف الأخطاء

### مشكلة: لا تظهر الإعلانات
**الحلول:**
1. **تحقق من وجود إعلانات نشطة**
   ```sql
   -- في Firebase Console
   SELECT * FROM ads WHERE isActive = true
   ```

2. **تحقق من الجمهور المستهدف**
   ```typescript
   // تأكد من أن targetAudience صحيح
   targetAudience: 'all' | 'new_users' | 'returning_users'
   ```

3. **تحقق من التواريخ**
   ```typescript
   // تأكد من أن الإعلان في الفترة الزمنية الصحيحة
   const now = new Date();
   if (startDate && new Date(startDate) > now) return false;
   if (endDate && new Date(endDate) < now) return false;
   ```

### مشكلة: لا تظهر الصور/الفيديوهات
**الحلول:**
1. **تحقق من رابط الوسائط**
   ```typescript
   // تأكد من أن mediaUrl صحيح ومتاح
   console.log('Media URL:', ad.mediaUrl);
   ```

2. **تحقق من إعدادات Supabase Storage**
   ```bash
   # اذهب إلى صفحة اختبار Storage
   /test-storage-status
   ```

### مشكلة: لا يعمل Professional Ad Popup
**الحلول:**
1. **تحقق من إعدادات المستخدم**
   ```typescript
   userPreferences: {
     allowAds: true,                    // ✅ السماح بالإعلانات
     preferredTypes: ['modal', 'toast'], // ✅ أنواع مدعومة
     maxDisplaysPerDay: 3               // ✅ عدد مرات العرض
   }
   ```

2. **تحقق من إعدادات الإعلان**
   ```typescript
   {
     popupType: 'modal',        // ✅ نوع الإعلان المنبثق
     displayDelay: 3,           // ✅ تأخير العرض (بالثواني)
     maxDisplays: 1,            // ✅ عدد مرات العرض
     displayFrequency: 'once'   // ✅ تكرار العرض
   }
   ```

## 📊 مراقبة الأداء

### 1. إحصائيات المشاهدات
```typescript
// في لوحة التحكم
{
  views: 0,    // عدد المشاهدات
  clicks: 0    // عدد النقرات
}
```

### 2. تحليل الأداء
```bash
# اذهب إلى لوحة التحكم
/dashboard/admin/ads

# راقب:
- الإعلانات الأكثر مشاهدة
- الإعلانات الأكثر نقرة
- معدل التحويل (CTR)
```

## 🎨 تخصيص المظهر

### 1. تخصيص Ad Banner
```typescript
// في src/app/page.tsx
<AdBanner 
  maxAds={2}                    // عدد الإعلانات
  className="max-w-4xl mx-auto" // التصميم
/>
```

### 2. تخصيص Professional Ad Popup
```typescript
// في src/app/page.tsx
<ProfessionalAdPopup 
  maxAds={1}                    // عدد الإعلانات
  enableAnalytics={true}        // تفعيل الإحصائيات
  userPreferences={{
    allowAds: true,             // السماح بالإعلانات
    preferredTypes: ['modal'],  // أنواع مدعومة
    maxDisplaysPerDay: 3        // عدد مرات العرض
  }}
/>
```

## 📱 الاختبار على الأجهزة المختلفة

### 1. اختبار الموبايل
```bash
# افتح DevTools
# اختر Mobile view
# اختبر:
- ظهور Ad Banner
- ظهور Professional Ad Popup
- سهولة النقر على الإعلانات
```

### 2. اختبار التابلت
```bash
# اختبر:
- تخطيط الإعلانات
- أحجام الصور
- سهولة التفاعل
```

### 3. اختبار الكمبيوتر
```bash
# اختبر:
- جميع الميزات
- الأداء
- الإحصائيات
```

## 🚀 النتائج المتوقعة

بعد تطبيق هذه الخطوات، يجب أن تحصل على:

1. **Ad Banner يعمل بشكل مثالي**
   - إعلانات تظهر في القسم المخصص
   - تصميم متجاوب وجذاب
   - إحصائيات دقيقة

2. **Professional Ad Popup يعمل بشكل مثالي**
   - إعلانات منبثقة تظهر في الوقت المناسب
   - تجربة مستخدم سلسة
   - تحكم في عدد مرات العرض

3. **إحصائيات دقيقة**
   - تتبع المشاهدات والنقرات
   - تحليل الأداء
   - تقارير مفصلة

## 📞 الدعم الإضافي

إذا واجهت أي مشاكل:
1. تحقق من console المتصفح للأخطاء
2. استخدم صفحة الاختبار `/test-ads-display`
3. تحقق من إعدادات Firebase
4. راجع ملف `ADS_SYSTEM_README.md` للحلول التفصيلية

## 🎉 النتيجة النهائية

بعد اتباع هذا الدليل، ستتمكن من:
- عرض الإعلانات على الاندج بيدج بشكل مثالي
- تتبع أداء الإعلانات بدقة
- تخصيص تجربة المستخدم
- تحقيق أهداف التسويق


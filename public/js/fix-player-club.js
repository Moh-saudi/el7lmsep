
// ???? ????? ???? ?????? ????? ??? ????
console.log(' ???? ????? ???? ?????? ?????');

// ???? ????? ??????
window.fixPlayerClubId = async function() {
  console.log(' ??? ????? ???? ?????? ????? ??? ????...');
  
  try {
    const playerId = 'hChYVnu04cXe3KK8JJQu';
    const clubId = 'Nwr78w2YdYQhsKqHzPlCPGwGN2B3';
    
    console.log(' ???? ??????:', playerId);
    console.log(' ???? ??????:', clubId);
    
    const confirmFix = confirm(' ?? ???? ????? ??? ?????? ??? ???? ????? ????? ??????');
    
    if (!confirmFix) {
      console.log(' ?? ????? ????? ???????');
      return;
    }
    
    console.log(' ???? ????? ????????...');
    
    if (typeof firebase === 'undefined' || !firebase.firestore) {
      console.error(' Firebase ??? ????');
      alert('??? ????? ??? ????? ?? ???? ???????');
      return;
    }
    
    const db = firebase.firestore();
    const playerRef = db.collection('players').doc(playerId);
    
    await playerRef.update({
      club_id: clubId,
      clubId: clubId,
      updated_at: firebase.firestore.FieldValue.serverTimestamp(),
      fixed_club_link: true,
      fixed_at: new Date().toISOString()
    });
    
    console.log(' ?? ????? ???????? ?????!');
    alert(' ?? ????? ??? ?????? ??????? ?????!');
    window.location.reload();
    
  } catch (error) {
    console.error(' ??? ?? ????? ????????:', error);
    alert('??? ???: ' + error.message);
  }
};

console.log(' ???? ??????? ?????! ??????: fixPlayerClubId()');


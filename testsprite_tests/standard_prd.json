{
  "meta": {
    "project": "El7hm - Football Player Management Platform",
    "date": "2025-09-13",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "El7hm is a comprehensive football player management platform designed to support players, clubs, agents, academies, trainers, and marketers with robust management dashboards, real-time notifications, multilingual support, and integrated payment processing. It offers full lifecycle management including player profiles, skill assessments, contract management, and performance analytics.",
  "core_goals": [
    "Provide a centralized platform for managing football players, clubs, agents, academies, and related roles.",
    "Enable seamless user authentication with OTP verification via SMS and WhatsApp.",
    "Offer a production-ready, secure, and multi-currency payment system integrated with Geidea and support for Apple Pay and SkipCash.",
    "Support multi-language functionality (Arabic and English) with RTL and LTR layout adjustments.",
    "Deliver user-friendly dashboards tailored to different user roles with customizable layouts and real-time notifications.",
    "Ensure robust media management including image and video uploads and organization.",
    "Implement a comprehensive referral and rewards system to incentivize platform growth.",
    "Provide detailed analytics and monitoring for performance optimization and security.",
    "Maintain high security standards including rate limiting, error handling, and secure logging.",
    "Enable efficient tournament registration and management system."
  ],
  "key_features": [
    "Authentication System with OTP via SMS and WhatsApp supporting both registration and password recovery flows with unified OTP sending logic.",
    "Production-ready Payment System integrated with Geidea including multi-currency support, Apple Pay, SkipCash, subscription and invoice management, and webhook integration for live payment updates.",
    "Role-based Multi-Account Management including player, club, academy, agent, trainer, marketer, and admin with customized dashboards.",
    "Player Management featuring complete profiles, skills assessment, medical records, achievements, contract history, and media galleries.",
    "Smart multi-channel Notification System for real-time user updates.",
    "Media Management supporting uploads and storage of images and videos using Firebase and Supabase.",
    "Comprehensive Translation System supporting Arabic and English with instant language switching, localStorage persistence, and RTL/LTR UI adjustments.",
    "Unified Sidebar and Header components with full language switcher integration across all dashboards and account types.",
    "Security enhancements including rate limiting, comprehensive error handling, HMAC signature verification for payments, and secure logging.",
    "Tournament registration and management with API endpoints for creating and handling tournament registrations.",
    "Admin Panel with advanced statistics, email migration, export tools, and action logs.",
    "UI Components library utilizing Tailwind CSS and Radix UI for consistent design and animation with Framer Motion."
  ],
  "user_flow_summary": [
    "User authenticates via phone number with OTP sent through SMS or WhatsApp; OTP verification secures login and registration.",
    "Authenticated users land on customized dashboards based on their account type (player, club, agent, etc.) with access to respective features.",
    "Users can switch languages instantly via a language switcher component that updates translations and UI direction without page reload.",
    "Payment sessions are created securely via the Geidea gateway supporting multiple payment methods and currencies; real-time payment status updates via webhook.",
    "Players can manage their profiles, upload and view media content, track achievements and contract status.",
    "Clubs and agents manage their players, contracts, and negotiations with billing and subscription features integrated.",
    "Administrators access advanced dashboards for system statistics, user management, and security logs.",
    "Tournament system allows users to register and manage participation with API-driven flows.",
    "Notifications are pushed in real-time through multiple channels for engagement and system alerts."
  ],
  "validation_criteria": [
    "All user text content must be fully translatable in Arabic and English with proper RTL and LTR layouts and tested across all dashboard types.",
    "OTP sending for registration and password recovery must share unified backend logic and frontend flow, ensuring SMS and WhatsApp delivery with rate limiting.",
    "Payment workflows must be thoroughly tested with real Geidea production credentials for multi-currency processing and Apple Pay support.",
    "Multi-role dashboards must accurately render sidebar, header, and features based on user account type with properly localized text.",
    "Media upload components must handle images and videos robustly with proper error handling and progress feedback.",
    "Notification system must deliver messages in near real-time across supported channels and be reliable under load.",
    "Security measures such as rate limiting, signature verification, and error handling must be in place and audited.",
    "Translation state persistence must reliably store and load language preferences from localStorage.",
    "UI and UX should be responsive and accessible for mobile and desktop clients.",
    "Tournament registration API endpoints must validate input and enforce business rules securely and reliably."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 14",
      "React 18",
      "Firebase",
      "Supabase",
      "Tailwind CSS",
      "Radix UI",
      "Framer Motion",
      "Geidea Payment",
      "BeOn SMS/WhatsApp",
      "Microsoft Clarity",
      "Google Tag Manager",
      "Sentry",
      "Docker"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "نظام مصادقة متكامل بالهاتف مع OTP عبر SMS و WhatsApp",
        "files": [
          "src/lib/firebase/auth-provider.tsx",
          "src/lib/firebase/config.ts",
          "src/lib/auth/smart-login-system.ts",
          "src/app/api/auth/check-user-exists/route.ts",
          "src/app/api/sms/send-otp/route.ts",
          "src/app/api/sms/verify-otp/route.ts",
          "src/app/api/whatsapp/send-otp/route.ts",
          "src/app/api/whatsapp/verify-otp/route.ts"
        ]
      },
      {
        "name": "Payment System",
        "description": "نظام دفع متكامل مع Geidea و Apple Pay و SkipCash",
        "files": [
          "src/lib/geidea-client.ts",
          "src/lib/geidea-error-handler.ts",
          "src/app/api/geidea/create-session/route.ts",
          "src/app/api/geidea/apple-pay-session/route.ts",
          "src/app/api/geidea/skipcash-session/route.ts",
          "src/components/GeideaPaymentModal.tsx",
          "src/components/shared/BulkPaymentPage.tsx"
        ]
      },
      {
        "name": "Dashboard Layouts",
        "description": "أنظمة تخطيط متعددة للوحات التحكم المختلفة",
        "files": [
          "src/components/layout/ResponsiveLayout_fixed.tsx",
          "src/components/layout/UnifiedSidebar.tsx",
          "src/components/layout/EnhancedSidebar.tsx",
          "src/components/layout/ModernEnhancedSidebar.tsx",
          "src/components/layout/AdminSidebar.jsx",
          "src/components/layout/PlayerSidebar.tsx",
          "src/components/layout/ModernUnifiedDashboardLayout.tsx"
        ]
      },
      {
        "name": "Multi-Account Management",
        "description": "إدارة حسابات متعددة (لاعب، نادي، أكاديمية، وكيل، مدرب، مسوق، إدارة)",
        "files": [
          "src/app/dashboard/layout.tsx",
          "src/app/dashboard/player/page.tsx",
          "src/app/dashboard/club/page.tsx",
          "src/app/dashboard/academy/page.tsx",
          "src/app/dashboard/agent/page.tsx",
          "src/app/dashboard/trainer/page.tsx",
          "src/app/dashboard/marketer/page.tsx",
          "src/app/dashboard/admin/page.tsx"
        ]
      },
      {
        "name": "Player Management",
        "description": "إدارة شاملة للاعبين مع تقييمات ومقاطع فيديو",
        "files": [
          "src/app/dashboard/club/players/page.tsx",
          "src/app/dashboard/academy/players/page.tsx",
          "src/components/player/PlayerCard.tsx",
          "src/components/player/PlayerEvaluation.tsx",
          "src/components/player/PlayerVideoUpload.tsx"
        ]
      },
      {
        "name": "Tournament System",
        "description": "نظام البطولات والتسجيل",
        "files": [
          "src/app/tournaments/unified-registration/page.tsx",
          "src/app/api/tournaments/registrations/route.ts",
          "src/app/api/tournaments/registrations/[id]/route.ts"
        ]
      },
      {
        "name": "Notification System",
        "description": "نظام إشعارات ذكي متعدد القنوات",
        "files": [
          "src/lib/notifications/smart-notifications.ts",
          "src/lib/notifications/unified-notification-service.ts",
          "src/lib/firebase/notifications.ts",
          "src/components/notifications/JoinRequestNotifications.tsx"
        ]
      },
      {
        "name": "Media Management",
        "description": "إدارة الوسائط مع رفع الصور والفيديوهات",
        "files": [
          "src/lib/supabase/storage.ts",
          "src/lib/supabase/video-storage.ts",
          "src/lib/supabase/image-utils.ts",
          "src/app/api/upload/video/route.ts",
          "src/lib/firebase/upload-media.ts"
        ]
      },
      {
        "name": "SMS/WhatsApp Services",
        "description": "خدمات إرسال الرسائل عبر SMS و WhatsApp",
        "files": [
          "src/lib/beon/sms-service.ts",
          "src/lib/beon/whatsapp-service.ts",
          "src/lib/beon/unified-messaging-service.ts",
          "src/app/api/sms/send-otp/route.ts",
          "src/app/api/whatsapp/send-official/route.ts"
        ]
      },
      {
        "name": "Analytics & Monitoring",
        "description": "تحليلات ومراقبة الأداء",
        "files": [
          "src/lib/console-performance.ts",
          "src/lib/performance/app-optimizer.ts",
          "src/lib/debug-system.ts",
          "src/lib/security/secure-logger.ts"
        ]
      },
      {
        "name": "Currency & Localization",
        "description": "تحويل العملات والترجمة",
        "files": [
          "src/lib/currency-rates.ts",
          "src/lib/currency-converter.ts",
          "src/lib/cities-data.ts"
        ]
      },
      {
        "name": "Security & Rate Limiting",
        "description": "نظام الأمان والحد من الطلبات",
        "files": [
          "src/lib/security/rate-limit.ts",
          "src/lib/security/secure-logger.ts",
          "src/middleware.js"
        ]
      },
      {
        "name": "OCR & Receipt Processing",
        "description": "معالجة الإيصالات باستخدام OCR",
        "files": [
          "src/lib/ocr/receipt-reader.ts"
        ]
      },
      {
        "name": "Referral System",
        "description": "نظام الإحالات والمكافآت",
        "files": [
          "src/lib/referral/referral-service.ts",
          "src/lib/organization/organization-referral-service.ts"
        ]
      },
      {
        "name": "Admin Panel",
        "description": "لوحة تحكم الإدارة مع إحصائيات متقدمة",
        "files": [
          "src/app/dashboard/admin/page.tsx",
          "src/app/dashboard/admin/clarity/page.tsx",
          "src/app/dashboard/admin/email-migration/page.tsx",
          "src/lib/admin/action-logs.ts",
          "src/lib/admin/export-manager.ts"
        ]
      },
      {
        "name": "UI Components",
        "description": "مكونات واجهة المستخدم المتقدمة",
        "files": [
          "src/components/ui/button.tsx",
          "src/components/ui/avatar.tsx",
          "src/components/ui/badge.tsx",
          "src/components/ui/separator.tsx",
          "src/components/ui/dialog.tsx",
          "src/components/ui/input.tsx"
        ]
      },
      {
        "name": "Error Handling",
        "description": "نظام معالجة الأخطاء الشامل",
        "files": [
          "src/lib/runtime-error-handler.ts",
          "src/lib/firebase/error-handler.ts",
          "src/lib/geidea-error-handler.ts",
          "src/lib/utils/issue-analyzer.ts"
        ]
      },
      {
        "name": "Performance Optimization",
        "description": "تحسينات الأداء والذاكرة",
        "files": [
          "src/lib/utils/complexity-reducer.ts",
          "src/lib/utils/code-cleanup.ts",
          "src/lib/utils/comprehensive-fixer.ts",
          "src/lib/performance/console-optimizer.ts"
        ]
      }
    ]
  }
}

export interface PerformanceTemplate {
  id: string;
  title: string;
  sms: string; // <= 65 chars when possible
  whatsapp: string; // long rich message
}

export interface TemplateCategory {
  id: string;
  title: string;
  templates: PerformanceTemplate[];
}

export const performanceTemplateCategories: TemplateCategory[] = [
  {
    id: 'technical-skills',
    title: 'المهارات الفنية',
    templates: [
      {
        id: 'dribbling-advanced',
        title: 'مراوغة متقدمة',
        sms: 'مراوغة مميزة؛ عزز القرار الأخير واللمسة قبل التسديد.',
        whatsapp: `🎯 تقييم: مراوغة متقدمة

أظهرت تحكمًا ممتازًا بالكرة تحت الضغط مع تنويع ناجح في الإيقاع.

نقاط القوة:
• تتابع لمسات نظيف واستدارة سريعة
• تغيير اتجاه فعال بمساحة ضيقة

للتطوير:
• تحسين القرار الأخير (تمريرة/تسديدة)
• تقليل اللمسة الإضافية قبل التسديد

استمر، الأساس قوي جدًا!`
      },
      {
        id: 'first-touch',
        title: 'اللمسة الأولى',
        sms: 'لمسة أولى جيدة؛ طوّر التهيئة لجانبك المفضل سريعًا.',
        whatsapp: `⚽ تقييم: اللمسة الأولى

التحكم الأول غالبًا جيد، وتأثيره إيجابي في الحفاظ على الاستحواذ.

ملاحظات:
• التهيئة ناحية القدم المفضلة تحتاج سرعة أعلى
• جرّب فتح الجسد قبل الاستلام لتوسيع زاوية الرؤية

تدريب مقترح: استقبال + تمرير باللمسة الثانية تحت ضغط محدود.`
      },
      {
        id: 'passing-vision',
        title: 'رؤية التمرير',
        sms: 'رؤية تمرير جيدة؛ مرّر عموديًا أسرع عند الاختراق.',
        whatsapp: `🧠 تقييم: رؤية التمرير

تملك قراءة جيدة للمساحات مع توازن بين الآمن والمخاطرة.

تحسينات:
• زيادة التمرير العمودي المبكر خلف الخط
• جذب الخصم ثم لعب الكُرة الثالثة بسرعة

أثر فوري: يرفع فرص الاختراق وصناعة الفرص.`
      }
    ]
  },
  {
    id: 'physical',
    title: 'الجانب البدني',
    templates: [
      {
        id: 'speed-explosive',
        title: 'سرعة وانفجار',
        sms: 'انفجار ممتاز؛ حسّن الانطلاقة الثانية بعد المراوغة.',
        whatsapp: `⚡ تقييم: السرعة والانفجار

السرعة القصوى مميزة، والانطلاقة الأولى قوية.

لتطوير الأثر:
• ركّز على الانطلاقة الثانية بعد تجاوز الخصم
• حافظ على تردد خطوات قصير قبل التسارع

تمرين: 10-20م متكرر مع تغيير اتجاه فورًا.`
      },
      {
        id: 'endurance',
        title: 'التحمل والجهد',
        sms: 'التحمل جيد؛ وحّد الإيقاع آخر 10 دقائق.',
        whatsapp: `🏃 تقييم: التحمل والجهد

توزيع الجهد جيد إجمالاً. آخر 10 دقائق يشهد هبوطًا طفيفًا.

نوصي بـ:
• فترات HIIT قصيرة بين الحصص
• مراقبة نبض القلب للعودة السريعة للمستوى الآمن

الاستمرارية سترفع الثبات الذهني والبدني.`
      }
    ]
  },
  {
    id: 'tactical',
    title: 'رؤية تكتيكية',
    templates: [
      {
        id: 'positioning',
        title: 'التمركز والفراغ',
        sms: 'تمركز ذكي؛ حسّن توقيت التحرك بين الخطوط.',
        whatsapp: `📐 تقييم: التمركز واستغلال الفراغ

تتخذ مواقع داعمة جيدة وتوفر خيارًا للزميل حامل الكرة.

تحسينات دقيقة:
• التحرك بين الخطوط قبل الاستلام بنصف ثانية
• تثبيت المدافع بجسدك قبل الدوران

هذا يضاعف جودة الاستلام والتطوير.`
      },
      {
        id: 'defensive-coverage',
        title: 'التغطية الدفاعية',
        sms: 'تغطية مقبولة؛ قرّب المسافة بينك وبين الخط الخلفي.',
        whatsapp: `🛡️ تقييم: التغطية الدفاعية

دعمك للدفاع واضح عند فقد الكرة.

لتقليل الثغرات:
• قرب المسافة مع الخط الخلفي 3-5م
• زاوية الجسد نحو الكرة والخصم معًا

تمرين موقف: 4 ضد 4 + لاعبي ارتكاز.`
      }
    ]
  },
  {
    id: 'video-quality',
    title: 'جودة الفيديو والنصح العام',
    templates: [
      {
        id: 'improve-quality',
        title: 'تحسين جودة الفيديو',
        sms: 'حسّن جودة التصوير والإضاءة وثبّت الكاميرا.',
        whatsapp: `🎥 ملاحظة: جودة التصوير

نقترح:
• إضاءة أفضل وموقع مواجهة للشمس نهارًا
• تثبيت الكاميرا وارتفاع ثابت
• لقطات أقرب أثناء المهارة

يساعدنا هذا على تقييم أدق ويوضح تقدمك.`
      },
      {
        id: 'general-progress',
        title: 'تقدم عام',
        sms: 'تقدم ملحوظ؛ استمر وخطط لأهداف أسبوعية.',
        whatsapp: `🌟 تقييم عام: تقدم ملحوظ

محصلتك الفنية/البدنية تتحسن بوتيرة جيدة.
حدّد هدفين أسبوعيًا (مهارة + جانب بدني) وتابع التنفيذ.

نحن متابعون لنتائجك القادمة.`
      }
    ]
  }
];

export function searchTemplates(term: string): PerformanceTemplate[] {
  const q = term.trim().toLowerCase();
  if (!q) return [];
  const results: PerformanceTemplate[] = [];
  for (const cat of performanceTemplateCategories) {
    for (const t of cat.templates) {
      const hay = `${t.title}\n${t.sms}\n${t.whatsapp}`.toLowerCase();
      if (hay.includes(q)) results.push(t);
    }
  }
  return results;
}

export function exportTemplatesAsJson(): string {
  return JSON.stringify(performanceTemplateCategories, null, 2);
}



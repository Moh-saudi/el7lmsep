// نظام رسائل تحليل الأداء للاعبين
// يحتوي على نسختين: طويلة للواتساب وقصيرة للـ SMS

export interface PerformanceTemplate {
  id: string;
  category: string;
  title: string;
  whatsappMessage: string;
  smsMessage: string; // 65 حرف كحد أقصى
  tags: string[];
}

export interface TemplateCategory {
  id: string;
  name: string;
  icon: string;
  color: string;
  templates: PerformanceTemplate[];
}

export const performanceAnalysisCategories: TemplateCategory[] = [
  {
    id: "technical_skills",
    name: "المهارات التقنية",
    icon: "⚽",
    color: "blue",
    templates: [
      {
        id: "tech_01",
        category: "technical_skills",
        title: "تحسن في التحكم بالكرة",
        whatsappMessage: `🔥 تحليل أداء احترافي 🔥

مرحباً [اسم اللاعب] 👋

بعد مراجعة دقيقة لأدائك في الفيديو المرسل، يسعدني أن أشاركك التحليل التالي:

✅ نقاط القوة:
• تحكم ممتاز في الكرة بالقدم اليمنى
• توقيت جيد في استلام الكرة
• ثبات في المراوغات القصيرة

🎯 مجالات التطوير:
• تحسين التحكم بالقدم اليسرى
• تطوير سرعة اتخاذ القرار
• العمل على دقة التمرير لمسافات طويلة

💡 التوصيات:
1. تمارين يومية للقدم الضعيفة (15 دقيقة)
2. تدريب على التمرير تحت ضغط
3. ممارسة المراوغة في مساحات ضيقة

⭐ التقييم العام: 7.5/10

استمر في العمل الجاد! 💪`,
        smsMessage: "🔥 أداء ممتاز! تحكم جيد بالكرة. ركز على القدم اليسرى والتمرير ⚽",
        tags: ["تحكم", "مراوغة", "تمرير"]
      },
      {
        id: "tech_02",
        category: "technical_skills",
        title: "تطوير التسديد",
        whatsappMessage: `🎯 تحليل دقيق للتسديد 🎯

عزيزي [اسم اللاعب] 👋

تم تحليل مهاراتك في التسديد بعناية:

✅ الإيجابيات:
• قوة تسديد جيدة من المنطقة
• توازن ممتاز أثناء التسديد
• اختيار زوايا مناسبة

🔧 مجالات التحسين:
• دقة التسديد من خارج المنطقة
• التسديد بالقدم الضعيفة
• التسديد السريع (أول لمسة)

📊 الإحصائيات:
- دقة التسديد: 65%
- التسديد بالقدم اليمنى: 8/10
- التسديد بالقدم اليسرى: 5/10

🏆 خطة التطوير:
1. 50 تسديدة يومياً بالقدم الضعيفة
2. تدريب التسديد من زوايا مختلفة
3. ممارسة التسديد تحت ضغط الوقت

مستقبل واعد! 🌟`,
        smsMessage: "🎯 تسديد قوي! اعمل على الدقة والقدم اليسرى. دقة حالية 65% 🥅",
        tags: ["تسديد", "دقة", "قوة"]
      },
      {
        id: "tech_03",
        category: "technical_skills",
        title: "تحسين التمرير",
        whatsappMessage: `📊 تقرير تحليل التمرير 📊

أهلاً [اسم اللاعب] 🤝

نتائج تحليل مهارات التمرير:

✨ نقاط متميزة:
• دقة عالية في التمريرات القصيرة (85%)
• رؤية جيدة للملعب
• توقيت ممتاز في التمرير الخلفي

⚠️ نقاط للتحسين:
• التمريرات الطويلة تحتاج تطوير
• سرعة اتخاذ قرار التمرير
• التمرير بالقدم اليسرى

📈 الأرقام:
- التمريرات القصيرة: 85% دقة
- التمريرات المتوسطة: 70% دقة
- التمريرات الطويلة: 45% دقة

🎯 برنامج التطوير:
1. تدريب يومي على التمريرات الطويلة
2. تمارين الرؤية والتمرير السريع
3. استخدام القدم اليسرى في التدريب

موهبة حقيقية! 🌟`,
        smsMessage: "📊 تمرير قصير ممتاز 85%! طور الطويل والقدم اليسرى 🎯",
        tags: ["تمرير", "دقة", "رؤية"]
      }
    ]
  },
  {
    id: "physical_performance",
    name: "الأداء البدني",
    icon: "💪",
    color: "green",
    templates: [
      {
        id: "phys_01",
        category: "physical_performance",
        title: "تقييم السرعة والرشاقة",
        whatsappMessage: `⚡ تحليل الأداء البدني ⚡

مرحباً [اسم اللاعب] 🏃‍♂️

تقرير شامل عن قدراتك البدنية:

🚀 نقاط القوة:
• سرعة انطلاق ممتازة
• قدرة على الهروب من المدافعين
• تسارع جيد في أول 20 متر

💪 مجالات التطوير:
• تحسين القدرة على التحمل
• تطوير السرعة في المسافات الطويلة
• تقوية عضلات الساقين

📊 المقاييس:
- سرعة الانطلاق: 8.5/10
- الرشاقة: 7/10
- التحمل: 6/10
- القوة: 7.5/10

🏋️‍♂️ برنامج التطوير:
1. تمارين كارديو يومية (30 دقيقة)
2. تدريب السرعة 3 مرات أسبوعياً
3. تمارين تقوية العضلات
4. تدريب البليومتريك

استمر بهذا المستوى! 🔥`,
        smsMessage: "⚡ سرعة ممتازة! ركز على التحمل والقوة. انطلاق 8.5/10 💪",
        tags: ["سرعة", "رشاقة", "تحمل"]
      },
      {
        id: "phys_02",
        category: "physical_performance",
        title: "تقوية الجسم",
        whatsappMessage: `🏋️‍♂️ تقييم القوة البدنية 🏋️‍♂️

عزيزي [اسم اللاعب] 💪

نتائج تحليل القوة والبناء البدني:

✅ نقاط التميز:
• قوة في الجزء العلوي جيدة
• ثبات في المبارزات الهوائية
• قدرة على حفظ التوازن

🎯 مجالات التحسين:
• تقوية عضلات الفخذ
• تطوير قوة الجذع
• تحسين القدرة على القفز

📊 التقييم:
- قوة الجزء العلوي: 7/10
- قوة الساقين: 6.5/10
- قوة الجذع: 6/10
- القدرة على القفز: 7.5/10

💡 خطة التقوية:
1. تمارين الأوزان 4 مرات أسبوعياً
2. تمارين وزن الجسم يومياً
3. تدريب القفز والبليومتريك
4. تمارين الثبات والتوازن

بناء قوي! 🏆`,
        smsMessage: "💪 جسم قوي! اعمل على الفخذ والجذع. قفز ممتاز 7.5/10 🏋️‍♂️",
        tags: ["قوة", "بناء", "قفز"]
      }
    ]
  },
  {
    id: "tactical_awareness",
    name: "الوعي التكتيكي",
    icon: "🧠",
    color: "purple",
    templates: [
      {
        id: "tact_01",
        category: "tactical_awareness",
        title: "تحسين الوضعية",
        whatsappMessage: `🧠 تحليل الذكاء التكتيكي 🧠

أهلاً وسهلاً [اسم اللاعب] ⚽

تقرير مفصل عن وعيك التكتيكي:

🎯 نقاط التفوق:
• قراءة جيدة لحركة الخصم
• وضعية ممتازة في الدفاع
• فهم مبادئ الضغط

📈 مجالات النمو:
• تحسين الحركة بدون الكرة
• تطوير التواصل مع الزملاء
• فهم أعمق للمساحات

🔍 التحليل:
- قراءة اللعب: 7.5/10
- الوضعية: 8/10
- التواصل: 6/10
- الحركة بدون كرة: 6.5/10

📚 برنامج التطوير:
1. مشاهدة مباريات محللة
2. تدريب الحركة بدون كرة
3. تمارين التواصل الجماعي
4. دراسة التكتيكات المختلفة

عقل كروي متميز! 🌟`,
        smsMessage: "🧠 وعي تكتيكي ممتاز! طور الحركة بدون كرة. وضعية 8/10 ⚽",
        tags: ["تكتيك", "وضعية", "ذكاء"]
      }
    ]
  },
  {
    id: "mental_strength",
    name: "القوة النفسية",
    icon: "🧘‍♂️",
    color: "indigo",
    templates: [
      {
        id: "mental_01",
        category: "mental_strength",
        title: "تطوير التركيز",
        whatsappMessage: `🧘‍♂️ تقييم القوة النفسية 🧘‍♂️

مرحباً [اسم اللاعب] 🌟

تحليل شامل للجانب النفسي في أدائك:

✨ نقاط القوة:
• ثقة عالية في المواقف الحرجة
• قدرة على الاسترداد من الأخطاء
• حماس وإيجابية واضحة

🎯 مجالات التطوير:
• تحسين التركيز في الدقائق الأخيرة
• إدارة الضغط بشكل أفضل
• الصبر في اللحظات الصعبة

🔥 التقييم النفسي:
- الثقة بالنفس: 8.5/10
- التركيز: 7/10
- إدارة الضغط: 6.5/10
- الدافعية: 9/10

💡 برنامج التطوير النفسي:
1. تمارين التأمل يومياً (10 دقائق)
2. تقنيات التنفس للتركيز
3. تدريب التصور الذهني
4. وضع أهداف قصيرة المدى

روح بطل حقيقي! 🏆`,
        smsMessage: "🧘‍♂️ ثقة عالية 8.5/10! اعمل على التركيز والصبر. روح بطل! 🏆",
        tags: ["تركيز", "ثقة", "صبر"]
      }
    ]
  },
  {
    id: "teamwork",
    name: "العمل الجماعي",
    icon: "🤝",
    color: "orange",
    templates: [
      {
        id: "team_01",
        category: "teamwork",
        title: "تحسين التعاون",
        whatsappMessage: `🤝 تقييم روح الفريق 🤝

أهلاً [اسم اللاعب] ⚽

تحليل مهاراتك في العمل الجماعي:

🌟 نقاط التميز:
• تفاعل إيجابي مع الزملاء
• استعداد لتمرير الكرة في الوقت المناسب
• دعم الزملاء في المواقف الصعبة

📊 مجالات التحسين:
• تطوير التواصل اللفظي
• فهم أفضل لأدوار الزملاء
• تحسين التوقيت في التحركات الجماعية

🎯 تقييم الأداء الجماعي:
- التعاون: 8/10
- التواصل: 6.5/10
- الدعم: 8.5/10
- التفاهم: 7/10

🏆 خطة تطوير العمل الجماعي:
1. تمارين التواصل في التدريب
2. لعب تمريرات جماعية قصيرة
3. دراسة حركات الزملاء
4. تدريب اللعب في مساحات صغيرة

لاعب مميز في الفريق! 🌟`,
        smsMessage: "🤝 تعاون ممتاز 8/10! طور التواصل والتوقيت. نجم الفريق! ⭐",
        tags: ["تعاون", "تواصل", "فريق"]
      }
    ]
  },
  {
    id: "general_feedback",
    name: "تقييم عام",
    icon: "⭐",
    color: "yellow",
    templates: [
      {
        id: "general_01",
        category: "general_feedback",
        title: "تقييم شامل إيجابي",
        whatsappMessage: `⭐ تقرير شامل عن الأداء ⭐

عزيزي [اسم اللاعب] 🌟

بعد مراجعة شاملة لأدائك، يسرني أن أشاركك:

🏆 التقييم العام: ممتاز
🔥 المستوى الحالي: 8.2/10

✅ أبرز نقاط القوة:
• موهبة طبيعية واضحة
• تحسن مستمر في الأداء
• روح رياضية عالية
• استعداد للتعلم والتطوير

🎯 الأولويات للفترة القادمة:
1. استمرار التدريب المنتظم
2. التركيز على نقاط التحسين المحددة
3. الحفاظ على اللياقة البدنية
4. تطوير الجانب التكتيكي

📈 التوقعات المستقبلية:
مع الاستمرار في هذا المستوى من الالتزام والعمل الجاد، أتوقع وصولك لمستويات أعلى خلال الأشهر القادمة.

فخور بتقدمك! 💪🔥`,
        smsMessage: "⭐ أداء ممتاز 8.2/10! موهبة واضحة. استمر كذا! 🔥💪",
        tags: ["ممتاز", "موهبة", "تقدم"]
      },
      {
        id: "general_02",
        category: "general_feedback",
        title: "تقييم يحتاج تحسين",
        whatsappMessage: `💪 فرصة للتطوير والنمو 💪

مرحباً [اسم اللاعب] ⚽

تقرير صادق وبناء عن أدائك:

📊 التقييم الحالي: 5.5/10
🎯 الهدف: الوصول إلى 7.5/10

🔧 المجالات التي تحتاج تركيز:
• تحسين اللمسة الأولى
• تطوير دقة التمرير
• زيادة التركيز أثناء اللعب
• تحسين اللياقة البدنية

💡 الخطة العلاجية:
1. تدريب إضافي 3 مرات أسبوعياً
2. التركيز على الأساسيات
3. تمارين بدنية مكثفة
4. مراجعة أساسيات اللعب

🌟 رسالة تحفيزية:
كل لاعب عظيم مر بهذه المرحلة. العبرة ليست في السقوط، بل في النهوض والاستمرار. أنت قادر على تحقيق أكثر من ذلك بكثير!

معك في رحلة التطوير! 🚀`,
        smsMessage: "💪 تحتاج تطوير اللمسة والتمرير. قادر على أكثر! 5.5/10 🚀",
        tags: ["تطوير", "تحسين", "دعم"]
      }
    ]
  }
];

// دالة البحث في القوالب
export function searchPerformanceTemplates(query: string): PerformanceTemplate[] {
  if (!query.trim()) return [];
  
  const searchTerm = query.toLowerCase().trim();
  const allTemplates = performanceAnalysisCategories.flatMap(cat => cat.templates);
  
  return allTemplates.filter(template => 
    template.title.toLowerCase().includes(searchTerm) ||
    template.whatsappMessage.toLowerCase().includes(searchTerm) ||
    template.smsMessage.toLowerCase().includes(searchTerm) ||
    template.tags.some(tag => tag.toLowerCase().includes(searchTerm)) ||
    template.category.toLowerCase().includes(searchTerm)
  );
}

// دالة الحصول على القوالب حسب الفئة
export function getTemplatesByCategory(categoryId: string): PerformanceTemplate[] {
  const category = performanceAnalysisCategories.find(cat => cat.id === categoryId);
  return category ? category.templates : [];
}

// دالة الحصول على جميع القوالب
export function getAllPerformanceTemplates(): PerformanceTemplate[] {
  return performanceAnalysisCategories.flatMap(cat => cat.templates);
}

// دالة تصدير القوالب بصيغة JSON
export function exportTemplatesAsJSON(): string {
  return JSON.stringify(performanceAnalysisCategories, null, 2);
}

// دالة التحقق من طول رسالة SMS
export function validateSMSLength(message: string): { isValid: boolean; length: number; remaining: number } {
  const length = message.length;
  const maxLength = 65;
  
  return {
    isValid: length <= maxLength,
    length: length,
    remaining: maxLength - length
  };
}

// دالة تنسيق الرسالة مع بيانات اللاعب
export function formatMessage(template: PerformanceTemplate, playerName: string, messageType: 'whatsapp' | 'sms'): string {
  const message = messageType === 'whatsapp' ? template.whatsappMessage : template.smsMessage;
  return message.replace('[اسم اللاعب]', playerName);
}

